<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>shotsbyhasnain019</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header>
    <h1>shotsbyhasnain019</h1>
    <p>just a small hobby ðŸ“¸</p>
    <div class="socials">
  <a href="https://www.instagram.com/shotsbyhasnain019" target="_blank" class="insta-link">
    <svg xmlns="http://www.w3.org/2000/svg" class="insta-icon" fill="none" viewBox="0 0 24 24" stroke="white">
      <rect x="2" y="2" width="20" height="20" rx="6" stroke-width="1.6"></rect>
      <circle cx="12" cy="12" r="4.3" stroke-width="1.6"></circle>
      <circle cx="17.4" cy="6.6" r="1.2" fill="white"></circle>
    </svg>
    <span>@shotsbyhasnain019</span>
  </a>
</div>

  </header>

  <main class="gallery" id="gallery"></main>

  <div class="lightbox" id="lightbox">
    <span class="close-btn" id="closeBtn">&times;</span>
    <button class="nav-btn left" id="prevBtn">&#10094;</button>
    <img id="lightboxImg" alt="photo" draggable="false">
    <button class="nav-btn right" id="nextBtn">&#10095;</button>
  </div>

  <footer>Â© 2025 shotsbyhasnain019</footer>

  <script>
    const gallery = document.getElementById('gallery');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const closeBtn = document.getElementById('closeBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    const extensions = ['webp', 'jpg', 'jpeg', 'png'];
    const thumbs = [];
    let currentIndex = 0;
    let scale = 1, translate = {x:0, y:0};
    const MAX_SCALE = 4, MIN_SCALE = 1;

    async function imageExists(src) {
      try {
        const res = await fetch(src, { method: 'HEAD' });
        return res.ok;
      } catch {
        return false;
      }
    }

    (async function loadGallery() {
      let i = 1;
      while (true) {
        let found = false;
        for (const ext of extensions) {
          const path = `images/photo${i}.${ext}`;
          if (await imageExists(path)) {
            const img = new Image();
            img.src = path;
            img.alt = `Photo ${i}`;
            img.loading = 'lazy';
            img.addEventListener('load', () => img.classList.add('loaded'));

            const index = thumbs.length;
            img.addEventListener('click', () => openAt(index));

            const div = document.createElement('div');
            div.className = 'thumb';
            div.appendChild(img);
            gallery.appendChild(div);
            thumbs.push(img);
            found = true;
            break;
          }
        }
        if (!found) break;
        i++;
      }
    })();

    function openAt(i) {
      currentIndex = i;
      lightboxImg.src = thumbs[i].src;
      lightbox.classList.add('open');
      document.body.style.overflow = 'hidden';
      resetZoom();
    }

    function closeLightbox() {
      lightbox.classList.remove('open');
      document.body.style.overflow = '';
    }

    function nextImage() {
      currentIndex = (currentIndex + 1) % thumbs.length;
      lightboxImg.src = thumbs[currentIndex].src;
      resetZoom();
    }

    function prevImage() {
      currentIndex = (currentIndex - 1 + thumbs.length) % thumbs.length;
      lightboxImg.src = thumbs[currentIndex].src;
      resetZoom();
    }

    function resetZoom() {
      scale = 1;
      translate = {x:0, y:0};
      lightboxImg.style.transform = 'scale(1)';
    }

    closeBtn.addEventListener('click', closeLightbox);
    nextBtn.addEventListener('click', nextImage);
    prevBtn.addEventListener('click', prevImage);

    lightbox.addEventListener('click', e => {
      if (e.target === lightbox) closeLightbox();
    });

    window.addEventListener('keydown', e => {
      if (!lightbox.classList.contains('open')) return;
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowRight') nextImage();
      if (e.key === 'ArrowLeft') prevImage();
    });

    function applyTransform() {
      lightboxImg.style.transform = `scale(${scale}) translate(${translate.x}px, ${translate.y}px)`;
    }

    lightboxImg.addEventListener('wheel', e => {
      e.preventDefault();
      const zoom = e.deltaY < 0 ? 0.1 : -0.1;
      scale = Math.min(Math.max(scale + zoom, MIN_SCALE), MAX_SCALE);
      applyTransform();
    }, { passive: false });

    let isDragging = false, start = {x:0, y:0};
    lightboxImg.addEventListener('pointerdown', e => {
      if (scale <= 1) return;
      isDragging = true;
      start = {x: e.clientX - translate.x, y: e.clientY - translate.y};
      lightboxImg.style.cursor = 'grabbing';
      lightboxImg.setPointerCapture(e.pointerId);
    });

    lightboxImg.addEventListener('pointermove', e => {
      if (!isDragging) return;
      translate.x = e.clientX - start.x;
      translate.y = e.clientY - start.y;
      applyTransform();
    });

    lightboxImg.addEventListener('pointerup', e => {
      isDragging = false;
      lightboxImg.style.cursor = 'grab';
      lightboxImg.releasePointerCapture(e.pointerId);
    });

    // Pinch zoom
    let pinchStart = null;
    lightboxImg.addEventListener('touchstart', e => {
      if (e.touches.length === 2) {
        const dx = e.touches[0].pageX - e.touches[1].pageX;
        const dy = e.touches[0].pageY - e.touches[1].pageY;
        pinchStart = Math.hypot(dx, dy);
      }
    }, { passive: true });

    lightboxImg.addEventListener('touchmove', e => {
      if (e.touches.length === 2 && pinchStart) {
        const dx = e.touches[0].pageX - e.touches[1].pageX;
        const dy = e.touches[0].pageY - e.touches[1].pageY;
        const dist = Math.hypot(dx, dy);
        const diff = (dist - pinchStart) * 0.005;
        scale = Math.min(Math.max(scale + diff, MIN_SCALE), MAX_SCALE);
        pinchStart = dist;
        applyTransform();
        e.preventDefault();
      }
    }, { passive: false });

    lightboxImg.addEventListener('touchend', () => { pinchStart = null; });

    // DOUBLE CLICK TO RESET ZOOM
lightboxImg.addEventListener('dblclick', () => {
  // smooth zoom-out animation
  lightboxImg.style.transition = 'transform 0.3s ease';
  scale = 1;
  translate = { x: 0, y: 0 };
  applyTransform();

  // remove transition after animation completes
  setTimeout(() => {
    lightboxImg.style.transition = '';
  }, 300);
});

  </script>
</body>
</html>
